!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("@angular/forms"),require("@angular/common")):"function"==typeof define&&define.amd?define("ng-form-rules",["exports","@angular/core","rxjs","rxjs/operators","@angular/forms","@angular/common"],t):t(e["ng-form-rules"]={},e.ng.core,e.rxjs,e.rxjs.operators,e.ng.forms,e.ng.common)}(this,function(e,t,a,c,s,r){"use strict";var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};function o(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function i(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return s}function u(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e}var p=new t.InjectionToken("ngfr.model-settings"),l=new t.InjectionToken("ngfr.trace-settings"),d=function(){function e(e){void 0===e&&(e=!1),this.doTrace=e}return e.prototype.trace=function(e){if(this.doTrace){var t="[NGFR - "+this.getTimeStamp()+"] "+e;console.log(t)}},e.prototype.getTimeStamp=function(){return(new Date).toLocaleTimeString()},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:undefined,decorators:[{type:t.Optional},{type:t.Inject,args:[l]}]}]},e}(),y=function(){function e(){}return e.prototype.unique=function(e){return Array.isArray(e)?Array.from(new Set(e)):[]},e.prototype.isZeroOrGreater=function(e){return!e&&0===e||!(!e||"number"!=typeof e)&&0<e},e.decorators=[{type:t.Injectable}],e}(),f=function(){function e(e){this.results=e,this.results=this.results||[]}return Object.defineProperty(e.prototype,"passed",{get:function(){return!this.failedResults.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"passedResults",{get:function(){return this.results.filter(function(e){return!!e.passed&&!e.skipped})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"failedResults",{get:function(){return this.results.filter(function(e){return!e.passed})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skippedResults",{get:function(){return this.results.filter(function(e){return!!e.skipped})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this.messages[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"messages",{get:function(){var e=this.failedResults.map(function(e){return e.message});return Array.from(new Set(e))},enumerable:!0,configurable:!0}),e}(),h=function(){function e(){this._dependencyPropertySubscriptions=[],this.valid=[],this.edit=[],this.updateOn="change",this.valueChangeOptions={dependencyProperties:{valid:{distinctUntilChanged:!1,debounceMilliseconds:0},edit:{distinctUntilChanged:!1,debounceMilliseconds:0}},self:{asyncValid:{distinctUntilChanged:!1,debounceMilliseconds:0},edit:{distinctUntilChanged:!1,debounceMilliseconds:0}}}}return Object.defineProperty(e.prototype,"absolutePath",{get:function(){return this._absolutePath},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dependencyPropertySubscriptions",{get:function(){return this._dependencyPropertySubscriptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ownerModelSettingsName",{get:function(){return this._ownerModelSettingsName},enumerable:!0,configurable:!0}),e.isArrayItemProperty=function(e){return!e.name},e.prototype.setAbsolutePath=function(e){this._absolutePath=e},e.prototype.addDependencyPropertySubscription=function(e){this._dependencyPropertySubscriptions.push(e)},e.prototype.clearDependencyPropertySubscriptions=function(){this.dependencyPropertySubscriptions.forEach(function(e){return e.unsubscribe()}),this._dependencyPropertySubscriptions=[]},e.prototype.setOwnerModelSettingsName=function(e){this._ownerModelSettingsName=e},e}(),g={Passed:0,Failed:1,Skipped:2};g[g.Passed]="Passed",g[g.Failed]="Failed",g[g.Skipped]="Skipped";var m={AllPass:0,AnyPass:1};m[m.AllPass]="AllPass",m[m.AnyPass]="AnyPass";var v=function(){function e(e,t,r){var n=this;this.traceSvc=t,this.commonSvc=r,this.registeredSettings={},Array.isArray(e)&&e.forEach(function(e){n.initializeModelSetting(e),n.registeredSettings[e.name]=e})}return e.prototype.initializeModelSetting=function(e){this.traceSvc.trace('Initializing model settings "'+e.name+'"'),this.setPropertyMetadata(e.properties,e.name)},e.prototype.getModelSettings=function(e){return this.traceSvc.trace('Retrieving model settings "'+e+'"'),this.registeredSettings[e]?Object.assign({},this.registeredSettings[e]):null},e.prototype.getDependencyProperties=function(e){var t=this;if(!e)return[];var r=e.map(function(e){return t.getDependencyPropertiesFromTest(e)}).reduce(function(e,t){return e.concat(t)},[]);return this.commonSvc.unique(r)},e.prototype.groupTestsBySyncType=function(e){var o=this,i={sync:[],async:[]};return e&&e.forEach(function(e){var t={sync:!1,async:!1},r=o.getConfiguredFuncTypes(e.condition),n=o.getConfiguredFuncTypes(e.check);t.sync=r.sync||n.sync,t.async=r.async||n.async,t.sync&&!t.async&&i.sync.push(e),t.async&&i.async.push(e)}),i},e.prototype.validate=function(e,t,r){return this.runAllTests(e,t.valid,r).pipe(c.map(function(e){return e.propertyName=t.absolutePath,e}))},e.prototype.editable=function(e,t,r){return this.runAllTests(e,t.edit,r).pipe(c.map(function(e){return e.propertyName=t.absolutePath,e}))},e.prototype.runTests=function(t,e,r){var n=this;if(!e||!e.length)return new f([]);var o=e.map(function(e){return n.runTest(t,e,r)}).filter(function(e){return!!e});return new f(o)},e.prototype.runTestsAsync=function(t,e,r){var n=this;if(!e||!e.length)return a.of(new f([]));var o=e.map(function(e){return n.runTestAsync(t,e,r)});return a.forkJoin(o).pipe(c.map(function(e){return new f(e.filter(function(e){return!!e}))}))},e.prototype.runAllTests=function(t,e,r){var n=this;if(!e||!e.length)return a.of(new f([]));var o=this.groupTestsBySyncType(e);return a.of(this.runTests(t,o.sync,r)).pipe(c.mergeMap(function(e){return e.passed?n.runTestsAsync(t,o.async,r):a.of(e)}),c.take(1))},e.prototype.runTest=function(e,t,r){if(!t)return null;var n={passed:!0,name:t.name,message:null},o={passed:!1,name:t.name,message:t.message},i={passed:!0,skipped:!0,name:t.name,message:null};if(this.processRuleSet(e,t.condition,r)===g.Failed)return i;switch(this.processRuleSet(e,t.check,r)){case g.Passed:return n;case g.Failed:return o;case g.Skipped:default:return i}},e.prototype.runTestAsync=function(e,t,r){if(!t)return a.of(null);var n={passed:!0,name:t.name,message:null},o={passed:!1,name:t.name,message:t.message},i={passed:!0,skipped:!0,name:t.name,message:null},s=this.processRuleSetAsync(e,t.condition,r),u=this.processRuleSetAsync(e,t.check,r);return s.pipe(c.flatMap(function(e){return e===g.Failed?a.of(i):u.pipe(c.map(function(e){switch(e){case g.Passed:return n;case g.Failed:return o;case g.Skipped:default:return i}}))}))},e.prototype.processRuleSet=function(e,t,r){return t?this.isRuleGroup(t)?this.processRuleGroup(e,t,r):this.processRule(e,t,r):g.Skipped},e.prototype.processRuleSetAsync=function(e,t,r){return t?this.isRuleGroup(t)?this.processRuleGroupAsync(e,t,r):this.processRuleAsync(e,t,r):a.of(g.Skipped)},e.prototype.processRuleGroup=function(e,t,r){if(!t.rules)return g.Skipped;for(var n=0,o=0,i=0;i<t.rules.length;i++){var s=t.rules[i],u=this.processRuleSet(e,s,r);if(this.canShortCircuitRuleGroup(u,t))return u;u==g.Passed?n++:u==g.Skipped&&o++}return o===t.rules.length?g.Skipped:n===t.rules.length?g.Passed:g.Failed},e.prototype.processRuleGroupAsync=function(t,o,r){var n=this;if(!o.rules)return a.of(g.Skipped);var e=o.rules.map(function(e){return n.processRuleSetAsync(t,e,r)});return a.forkJoin(e).pipe(c.map(function(e){var t=e.filter(function(e){return e===g.Passed}).length,r=(e.filter(function(e){return e===g.Failed}).length,e.filter(function(e){return e===g.Skipped}).length),n=o.options||{resultRequirements:m.AllPass};return n.resultRequirements==m.AnyPass&&0<t?g.Passed:n.resultRequirements==m.AllPass&&t===e.length?g.Passed:r===e.length?g.Skipped:g.Failed}))},e.prototype.processRule=function(e,t,r){if(!t.func)return g.Skipped;var n=r?r.rootData:null;return t.func(e,n)?g.Passed:g.Failed},e.prototype.processRuleAsync=function(e,t,r){if(!t.func&&!t.asyncFunc)return a.of(g.Skipped);var n=r?r.rootData:null;return(t.func?a.of(t.func(e,n)):t.asyncFunc(e,n)).pipe(c.map(function(e){return e?g.Passed:g.Failed}))},e.prototype.canShortCircuitRuleGroup=function(e,t){var r=t.options||{resultRequirements:m.AllPass};return e==g.Passed&&r.resultRequirements==m.AnyPass||e==g.Failed&&r.resultRequirements==m.AllPass},e.prototype.isRuleGroup=function(e){var t=e;return!t.func&&!t.asyncFunc},e.prototype.getDependencyPropertiesFromTest=function(e){var t=this.getDependencyPropertiesFromRuleSet(e.check),r=this.getDependencyPropertiesFromRuleSet(e.condition);return this.commonSvc.unique(t.concat(r))},e.prototype.getDependencyPropertiesFromRuleSet=function(e){var t=this;if(!e)return[];var r=[];this.isRuleGroup(e)&&e.rules.forEach(function(e){r.push.apply(r,u(t.commonSvc.unique(t.getDependencyPropertiesFromRuleSet(e))))});var n=e;return n.options&&Array.isArray(n.options.dependencyProperties)&&r.push.apply(r,u(this.commonSvc.unique(n.options.dependencyProperties))),this.commonSvc.unique(r)},e.prototype.setPropertyMetadata=function(e,r,n){var o=this;void 0===n&&(n=""),e&&e.forEach(function(e){var t=o.setPropertyAbsolutePath(e,n);o.fillInEmptyTestNames(e),e.setOwnerModelSettingsName(r),e.properties?o.setPropertyMetadata(e.properties,r,t):e.arrayItemProperty&&o.setPropertyMetadata([e.arrayItemProperty],r,t)})},e.prototype.setPropertyAbsolutePath=function(e,t){void 0===t&&(t="");var r=t+(!t?"":".")+(h.isArrayItemProperty(e)?"[]":e.name);return e.setAbsolutePath(r),r},e.prototype.fillInEmptyTestNames=function(e){e.valid.filter(function(e){return!e.name}).forEach(function(e,t){return e.name="validTest"+t}),e.edit.filter(function(e){return!e.name}).forEach(function(e,t){return e.name="editTest"+t})},e.prototype.getConfiguredFuncTypes=function(e){var t=this;if(!e)return{sync:!1,async:!1};if(this.isRuleGroup(e)){var r=e.rules.map(function(e){return t.getConfiguredFuncTypes(e)});return{sync:0<=r.findIndex(function(e){return!!e.sync}),async:0<=r.findIndex(function(e){return!!e.async})}}var n=e;return{sync:!!n.func,async:!!n.asyncFunc}},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:Array,decorators:[{type:t.Optional},{type:t.Inject,args:[p]}]},{type:d},{type:y}]},e}(),S=function(){function t(e){this._pristine=e.pristine,this._untouched=e.untouched}return t.create=function(e){return new t(e)},t}(),b=function(){function r(e,t,r,n){this.rulesEngineSvc=e,this.formBuilder=t,this.traceSvc=r,this.commonSvc=n}return r.prototype.getModelSettings=function(e){return this.rulesEngineSvc.getModelSettings(e)},r.prototype.createFormGroup=function(e,t){var r;if("string"==typeof e){if(!(r=this.rulesEngineSvc.getModelSettings(e)))throw new Error('No model setting found with the name "'+e+'"')}else{if(!e)throw new Error("Adhoc model setting provided is invalid");r=e,this.rulesEngineSvc.initializeModelSetting(r)}this.traceSvc.trace('Creating form group using model settings "'+r.name+'"');var n=this.buildGroup(r.properties,t);return this.traceSvc.trace("Setting up dependency subscriptions"),this.resetDependencySubscriptions(n,r.properties),this.traceSvc.trace("Patching form group with initial value"),this.triggerValueChange(n),this.traceSvc.trace("Attaching model settings to form"),this.attachModelSettingsToForm(n,r),n},r.prototype.addArrayItemPropertyControl=function(e,t,r,n){var o=this.buildAbstractControl(e,r);!n||!this.commonSvc.isZeroOrGreater(n.index)||n.index>=t.length?t.push(o):t.insert(n.index,o);var i=this.getModelSettingsFromForm(t.root);this.resetDependencySubscriptions(t.root,i.properties),this.triggerValueChange(t)},r.prototype.extendValidator=function(e,t){if(t){var r=Array.isArray(t)?t:[t];e.setValidators(u([e.validator],r).filter(function(e){return!!e}))}},r.prototype.extendAsyncValidator=function(e,t){if(t){var r=Array.isArray(t)?t:[t];e.setAsyncValidators(u([e.asyncValidator],r).filter(function(e){return!!e}))}},r.prototype.buildAbstractControl=function(t,e){var r,n=this;return(r=t.arrayItemProperty?this.buildArray(t.arrayItemProperty,e,t.updateOn):t.properties?this.buildGroup(t.properties,e,t.updateOn):this.buildControl(e,t.updateOn)).setValidators(this.buildValidatorFunction(t)),r.setAsyncValidators(this.buildAsyncValidatorFunction(t)),r.valueChanges.pipe(this.applyValueChangeOptions(t.valueChangeOptions.self.edit)).subscribe(function(e){n.persistEditTests(r,t)}),r},r.prototype.buildControl=function(e,t){return new s.FormControl(e,{updateOn:t})},r.prototype.buildGroup=function(e,n,t){var o=this,i=new s.FormGroup({},{updateOn:t});return(e||[]).forEach(function(e){var t=n?n[e.name]:null,r=o.buildAbstractControl(e,t);i.addControl(e.name,r)}),i},r.prototype.buildArray=function(t,e,r){var n=this;return e=Array.isArray(e)?e:[],new s.FormArray(e.map(function(e){return n.buildAbstractControl(t,e)}),{updateOn:r})},r.prototype.buildValidatorFunction=function(n){var o=this,i=this.rulesEngineSvc.groupTestsBySyncType(n.valid);return i.sync.length?function(e){var t=o.getControlContextValues(e,n),r=o.rulesEngineSvc.runTests(t.relative,i.sync,{rootData:t.root,controlState:S.create(e)});return r.results.length&&o.traceSvc.trace('Validated property "'+n.absolutePath+'". '+o.buildTestResultStatsString(r)),o.mapToReactiveFormsValidationErrors(r)}:null},r.prototype.buildAsyncValidatorFunction=function(e){var n=this,o=this.buildAsyncValidatorFunctionRaw(e);if(!o)return null;var t=new a.BehaviorSubject(null),r=t.pipe(this.applyAsyncValidValueChangeOptions(e.valueChangeOptions.self.asyncValid),c.switchMap(function(e){if(e.passthrough){var t=e.control.errors||{},r=n.getLastErrorForControl(e.control);return a.of(Object.assign(t,{ngFormRules:r}))}return o(e.control)}),c.take(1));return function(e){return t.next(e),r}},r.prototype.buildAsyncValidatorFunctionRaw=function(r){var n=this,o=this.rulesEngineSvc.groupTestsBySyncType(r.valid);return o.async.length?function(t){var e=n.getControlContextValues(t,r);return n.rulesEngineSvc.runTestsAsync(e.relative,o.async,{rootData:e.root,controlState:S.create(t)}).pipe(c.tap(function(e){e.results.length&&n.traceSvc.trace('Validated (async) property "'+r.absolutePath+'". '+n.buildTestResultStatsString(e))}),c.map(n.mapToReactiveFormsValidationErrors),c.tap(function(e){return n.setLastErrorForControl(t,(e||{}).ngFormRules)}))}:null},r.prototype.resetDependencySubscriptions=function(e,t){this.removeDependencySubscriptions(t),this.addDependencySubscriptions(e,t)},r.prototype.removeDependencySubscriptions=function(e){var t=this;(e||[]).forEach(function(e){e.clearDependencyPropertySubscriptions(),e.properties&&t.removeDependencySubscriptions(e.properties),e.arrayItemProperty&&t.removeDependencySubscriptions([e.arrayItemProperty])})},r.prototype.addDependencySubscriptions=function(o,e,i){var s=this;(e||[]).forEach(function(e){var t=s.getPropertyFromParent(o,e,i);if(t&&(s.setupEditabilityDependencySubscriptions(t,o,e),s.setupValidationDependencySubscriptions(t,o,e),e.properties&&s.addDependencySubscriptions(t,e.properties),e.arrayItemProperty))for(var r=t,n=0;n<r.length;n++)s.addDependencySubscriptions(r,[e.arrayItemProperty],n)})},r.prototype.setupValidationDependencySubscriptions=function(n,o,i){var s=this;this.rulesEngineSvc.getDependencyProperties(i.valid).forEach(function(e){var t=s.findControlRelatively(o,e);if(t){var r=t.valueChanges.pipe(s.applyValueChangeOptions(i.valueChangeOptions.dependencyProperties.valid)).subscribe(function(e){s.setForceAsyncValidationTestForControl(n,!0),n.updateValueAndValidity({onlySelf:!0,emitEvent:!1})});i.addDependencyPropertySubscription(r)}})},r.prototype.setupEditabilityDependencySubscriptions=function(n,o,i){var s=this;this.rulesEngineSvc.getDependencyProperties(i.edit).forEach(function(e){var t=s.findControlRelatively(o,e);if(t){var r=t.valueChanges.pipe(s.applyValueChangeOptions(i.valueChangeOptions.dependencyProperties.edit)).subscribe(function(e){s.persistEditTests(n,i)});i.addDependencyPropertySubscription(r)}})},r.prototype.persistEditTests=function(t,r){var n=this,e=this.getControlContextValues(t,r);this.rulesEngineSvc.editable(e.relative,r,{rootData:e.root,controlState:S.create(t)}).subscribe(function(e){e.results.length&&n.traceSvc.trace('Editable property "'+r.absolutePath+'". '+n.buildTestResultStatsString(e)),e.passed&&t.disabled?t.enable({emitEvent:!1}):!e.passed&&t.enabled&&t.disable({emitEvent:!1})})},r.prototype.applyAsyncValidValueChangeOptions=function(n){var o=this;return function(e){var t,r;return e.pipe(c.tap(function(e){r=o.doesControlHaveForcedAsyncValidation(e),o.setForceAsyncValidationTestForControl(e,!1)}),c.debounce(function(e){return r||0<n.debounceMilliseconds?a.timer(n.debounceMilliseconds):a.EMPTY}),c.map(function(e){return{control:e,passthrough:!(e.value!==t||!n.distinctUntilChanged||r)}}),c.tap(function(e){e.passthrough||(t=e.control.value)}))}},r.prototype.applyValueChangeOptions=function(t){return function(e){return e.pipe(c.debounce(function(e){return 0<t.debounceMilliseconds?a.timer(t.debounceMilliseconds):a.EMPTY}),t.distinctUntilChanged?c.distinctUntilChanged():c.tap())}},r.prototype.getControlContextValues=function(e,t){return{root:e.root.getRawValue(),relative:h.isArrayItemProperty(t)?e.value:e.parent.getRawValue()}},r.prototype.getPropertyFromParent=function(e,t,r){return h.isArrayItemProperty(t)?e.at(r):e.get(t.name)},r.prototype.mapToReactiveFormsValidationErrors=function(e){if(!e||e.passed)return null;var t={};return e.failedResults.forEach(function(e){t[e.name]={message:e.message}}),{ngFormRules:{message:e.message,failed:t}}},r.prototype.findControlRelatively=function(t,e){var r,n=this,o=this.buildControlRelativePathArray(e);return o.length?(o.forEach(function(e){r=n.getControlByPathSegment(r||t,e)}),r):null},r.prototype.buildControlRelativePathArray=function(e){var r=[];return e&&"string"==typeof e&&e.split("/").forEach(function(e){var t=e.split(".").filter(function(e){return!!e});t.length?r.push.apply(r,u(t)):r.push(e)}),r},r.prototype.getControlByPathSegment=function(e,t){switch(t){case"":return e.root;case"..":return e.parent;case".":return e;default:return e.get(t)}},r.prototype.buildTestResultStatsString=function(e){return"Executed "+e.results.length+" tests ("+e.passedResults.length+" PASS | "+e.failedResults.length+" FAIL | "+e.skippedResults.length+" SKIP)"},r.prototype.attachModelSettingsToForm=function(e,t){e[r.FORM_MODEL_SETTINGS_PROPERTY_NAME]=t},r.prototype.getModelSettingsFromForm=function(e){return e[r.FORM_MODEL_SETTINGS_PROPERTY_NAME]},r.prototype.setForceAsyncValidationTestForControl=function(e,t){e[r.FORCE_ASYNC_VALID_TEST_RUN_PROPERTY_NAME]=t},r.prototype.setLastErrorForControl=function(e,t){e[r.CONTROL_LAST_ERROR]=t},r.prototype.getLastErrorForControl=function(e){return e[r.CONTROL_LAST_ERROR]},r.prototype.doesControlHaveForcedAsyncValidation=function(e){return!!e[r.FORCE_ASYNC_VALID_TEST_RUN_PROPERTY_NAME]},r.prototype.triggerValueChange=function(e){e.patchValue(e.value)},r.FORM_MODEL_SETTINGS_PROPERTY_NAME="ngFormRulesModelSetting",r.FORCE_ASYNC_VALID_TEST_RUN_PROPERTY_NAME="ngFormRulesForceAsyncValidTestRun",r.CONTROL_LAST_ERROR="ngFormRulesControlLastError",r.decorators=[{type:t.Injectable}],r.ctorParameters=function(){return[{type:v},{type:s.FormBuilder},{type:d},{type:y}]},r}(),P=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[],declarations:[],providers:[d,y]}]}],e}(),R=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[r.CommonModule,P],providers:[v,b],declarations:[]}]}],e}(),A=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[r.CommonModule,R],declarations:[],exports:[R]}]}],e}(),T=function(r){function e(e){var t=r.call(this)||this;return t._name=e,t}return o(e,r),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),e}(h),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(h),C=function(){function e(){}return e.prototype.property=function(e,t){if(!e||"string"!=typeof e)throw Error("Invalid property name");var r=new T(e);return t&&t(r),r},e.prototype.arrayItemProperty=function(e){var t=new E;return e&&e(t),t},e.prototype.validTest=function(e,t,r){return this.validNamedTest(null,e,t,r)},e.prototype.validNamedTest=function(e,t,r,n){return{name:e,message:t,check:r,condition:n}},e.prototype.editTest=function(e,t){return this.editNamedTest(null,e,t)},e.prototype.editNamedTest=function(e,t,r){return{name:e,check:t,condition:r}},e.prototype.rule=function(e,t){return this.ruleCombo(e,null,t)},e.prototype.ruleAsync=function(e,t){return this.ruleCombo(null,e,t)},e.prototype.ruleCombo=function(e,t,r){return{func:e,asyncFunc:t,options:r}},e.prototype.ruleGroup=function(e,t){return{rules:e,options:t||{resultRequirements:m.AllPass}}},e}(),F=function(){function e(e){this.builder=new C,this._name=e,this.properties=this.buildProperties()||[]}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),e}(),O=function(n){function e(e,t){var r=n.call(this,t)||this;return r.propertyName=e,r}return o(e,n),e}(f),_=function(e){function r(){return e.call(this,"adhoc")||this}return o(r,e),r.create=function(e){var t=new r;return t.properties=e&&e(t.builder)||[],t},r.prototype.buildProperties=function(){return[]},r}(F),M=function(){};e.FormRulesModule=A,e.MODEL_SETTINGS_TOKEN=p,e.TRACE_SETTINGS_TOKEN=l,e.ReactiveFormsRuleService=b,e.AbstractModelSettings=F,e.ArrayItemProperty=E,e.ControlState=S,e.PropertyBase=h,e.PropertyTestResults=O,e.Property=T,e.TestResultsBase=f,e.AdhocModelSettings=_,e.ValueChangeOptions=M,e.ResultsPassRequirement=m,e.ModelSettingsBuilder=C,e.ɵa=R,e.ɵe=v,e.ɵd=y,e.ɵc=d,e.ɵb=P,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ng-form-rules.umd.min.js.map